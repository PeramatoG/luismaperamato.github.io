<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Luismaperamato.com – Herramientas para espectáculos</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div class="page">
    <div class="container">
      <header>
        <div class="language-switcher">
          <label for="language-switcher-select" class="language-label" data-i18n-key="languageLabel">
            Idioma
          </label>
          <select
            id="language-switcher-select"
            aria-label="Selector de idioma"
            data-i18n-attr="aria-label:languageSelectAria"
          >
            <option value="es">ES</option>
            <option value="en">EN</option>
          </select>
        </div>

        <h1 data-i18n-key="siteName">Luismaperamato.com</h1>
        <p class="subtitle" data-i18n-key="subtitle">
          Iluminación, imagen y herramientas para espectáculos.
        </p>
        <p class="status" data-i18n-key="status">
          La web está en construcción, pero ya puedes descargar algunos de mis programas.
        </p>
      </header>

      <section>
        <h2 data-i18n-key="sectionGroups">Categorías</h2>
        <div class="group-list">
          <article class="group-card">
            <h3 data-i18n-key="groupSoftwareTitle">Software</h3>
            <p data-i18n-key="groupSoftwareSummary">
              Aplicaciones de control y utilidades para espectáculos en directo.
            </p>
            <a class="btn btn-primary" href="apps/software.html" data-i18n-key="groupSoftwareLink">
              Ver aplicaciones
            </a>
          </article>
          <article class="group-card">
            <h3 data-i18n-key="groupPluginsTitle">Plugins para GrandMA3</h3>
            <p data-i18n-key="groupPluginsSummary">
              Plugins y utilidades para crear paletas de color y presets más rápido.
            </p>
            <a class="btn btn-primary" href="apps/plugins-gma3.html" data-i18n-key="groupPluginsLink">
              Ver plugins
            </a>
          </article>
        </div>
      </section>

      <div class="footer">
        <span data-i18n-key="footerCopyright">© Luisma Peramato · 2025</span>
        <a
          class="ext-link"
          href="https://github.com/PeramatoG"
          target="_blank"
          rel="noopener noreferrer"
          data-i18n-key="footerGithubLink"
        >
          Ver repositorios en GitHub (PeramatoG)
        </a>
      </div>
    </div>
  </div>

  <script>
    const translations = {
      es: {
        pageTitle: 'Luismaperamato.com – Herramientas para espectáculos',
        languageLabel: 'Idioma',
        languageSelectAria: 'Selector de idioma',
        siteName: 'Luismaperamato.com',
        subtitle: 'Iluminación, imagen y herramientas para espectáculos.',
        status: 'La web está en construcción, pero ya puedes descargar algunos de mis programas.',
        sectionGroups: 'Categorías',
        groupSoftwareTitle: 'Software',
        groupSoftwareSummary: 'Aplicaciones de control y utilidades para espectáculos en directo.',
        groupSoftwareLink: 'Ver aplicaciones',
        groupPluginsTitle: 'Plugins para GrandMA3',
        groupPluginsSummary: 'Plugins y utilidades para crear paletas de color y presets más rápido.',
        groupPluginsLink: 'Ver plugins',
        footerCopyright: '© Luisma Peramato · 2025',
        footerGithubLink: 'Ver repositorios en GitHub (PeramatoG)'
      },
      en: {
        pageTitle: 'Luismaperamato.com – Tools for live shows',
        languageLabel: 'Language',
        languageSelectAria: 'Language selector',
        siteName: 'Luismaperamato.com',
        subtitle: 'Lighting, visuals and tools for live shows.',
        status: 'This site is under construction, but you can already download some of my apps.',
        sectionGroups: 'Categories',
        groupSoftwareTitle: 'Software',
        groupSoftwareSummary: 'Control apps and utilities for live shows.',
        groupSoftwareLink: 'View apps',
        groupPluginsTitle: 'GrandMA3 plugins',
        groupPluginsSummary: 'Plugins and utilities to create color palettes and presets faster.',
        groupPluginsLink: 'View plugins',
        footerCopyright: '© Luisma Peramato · 2025',
        footerGithubLink: 'View repositories on GitHub (PeramatoG)'
      }
    };

    const LANGUAGE_STORAGE_KEY = 'preferredLanguage';

    function applyTranslations(lang) {
      const dict = translations[lang];
      if (!dict) {
        return;
      }

      const textElements = document.querySelectorAll('[data-i18n-key]');
      textElements.forEach(function (elem) {
        const key = elem.getAttribute('data-i18n-key');
        const value = dict[key];
        if (typeof value === 'string') {
          elem.textContent = value;
        }
      });

      const attrElements = document.querySelectorAll('[data-i18n-attr]');
      attrElements.forEach(function (elem) {
        const mappings = elem.getAttribute('data-i18n-attr').split(',');
        mappings.forEach(function (mapping) {
          const parts = mapping.split(':');
          if (parts.length !== 2) {
            return;
          }
          var attrName = parts[0].trim();
          var key = parts[1].trim();
          var value = dict[key];
          if (typeof value === 'string') {
            elem.setAttribute(attrName, value);
          }
        });
      });

      if (typeof dict.pageTitle === 'string') {
        document.title = dict.pageTitle;
      }
      document.documentElement.lang = lang;
    }

    function getInitialLanguage() {
      var stored = null;
      try {
        stored = window.localStorage.getItem(LANGUAGE_STORAGE_KEY);
      } catch (e) {
        stored = null;
      }

      if (stored === 'es' || stored === 'en') {
        return stored;
      }

      var browserLang = (navigator.language || navigator.userLanguage || 'es').toLowerCase();
      if (browserLang.indexOf('es') === 0) {
        return 'es';
      }
      return 'en';
    }

    (function initLanguage() {
      var select = document.getElementById('language-switcher-select');
      if (!select) {
        return;
      }

      var initialLang = getInitialLanguage();
      if (initialLang !== 'es' && initialLang !== 'en') {
        initialLang = 'es';
      }

      select.value = initialLang;
      applyTranslations(initialLang);

      select.addEventListener('change', function (event) {
        var lang = event.target.value;
        if (lang !== 'es' && lang !== 'en') {
          return;
        }
        applyTranslations(lang);
        try {
          window.localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);
        } catch (e) {
          // Ignore storage errors
        }
      });
    })();
  </script>
</body>
</html>
